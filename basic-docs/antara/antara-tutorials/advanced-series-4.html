<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Advanced Series — Final Conceptual Discussion | Komodo Documentation</title>
    <meta name="description" content="Documentation for developers building on Komodo">
    <meta name="generator" content="VuePress 1.3.0">
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PC28587');</script>
  <link rel="icon" href="KMD_Mark_Black.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@komodoplatform">
  <meta name="twitter:title" content="Komodo Developer Documentation">
  <meta name="twitter:description" content="Documentation for developers building on the Komodo Platform">
  <meta name="twitter:image" content="https://developers.komodoplatform.com/start-here-pics/Dev_Docs_Introduction_small.png">
    <link rel="preload" href="/assets/css/0.styles.aad39029.css" as="style"><link rel="preload" href="/assets/js/app.2fb484c4.js" as="script"><link rel="preload" href="/assets/js/3.49432c4f.js" as="script"><link rel="preload" href="/assets/js/4.5c101ead.js" as="script"><link rel="preload" href="/assets/js/37.c342624a.js" as="script"><link rel="prefetch" href="/assets/js/10.96981e54.js"><link rel="prefetch" href="/assets/js/100.6ebdcb03.js"><link rel="prefetch" href="/assets/js/101.a95f2b8b.js"><link rel="prefetch" href="/assets/js/102.5fea1d49.js"><link rel="prefetch" href="/assets/js/103.d4a3a8ab.js"><link rel="prefetch" href="/assets/js/104.9b48490b.js"><link rel="prefetch" href="/assets/js/105.0afd7d32.js"><link rel="prefetch" href="/assets/js/106.6d1e5079.js"><link rel="prefetch" href="/assets/js/107.85c81933.js"><link rel="prefetch" href="/assets/js/108.d2228529.js"><link rel="prefetch" href="/assets/js/109.20e93132.js"><link rel="prefetch" href="/assets/js/11.a9323021.js"><link rel="prefetch" href="/assets/js/110.ec76fbdf.js"><link rel="prefetch" href="/assets/js/111.2048dc83.js"><link rel="prefetch" href="/assets/js/112.c8c6a14c.js"><link rel="prefetch" href="/assets/js/113.de0a1479.js"><link rel="prefetch" href="/assets/js/114.2fff8fb6.js"><link rel="prefetch" href="/assets/js/115.1761da54.js"><link rel="prefetch" href="/assets/js/116.db957f5b.js"><link rel="prefetch" href="/assets/js/117.24ff9134.js"><link rel="prefetch" href="/assets/js/118.165db874.js"><link rel="prefetch" href="/assets/js/119.5a3ed805.js"><link rel="prefetch" href="/assets/js/12.215eec2e.js"><link rel="prefetch" href="/assets/js/120.ffdaa12f.js"><link rel="prefetch" href="/assets/js/121.786d90e6.js"><link rel="prefetch" href="/assets/js/122.64917fbd.js"><link rel="prefetch" href="/assets/js/123.13789662.js"><link rel="prefetch" href="/assets/js/124.938e325b.js"><link rel="prefetch" href="/assets/js/125.a3241e54.js"><link rel="prefetch" href="/assets/js/126.e2db426d.js"><link rel="prefetch" href="/assets/js/127.29314c3d.js"><link rel="prefetch" href="/assets/js/128.7b3cfbc9.js"><link rel="prefetch" href="/assets/js/129.9c347be4.js"><link rel="prefetch" href="/assets/js/13.560d1b22.js"><link rel="prefetch" href="/assets/js/130.b951a76e.js"><link rel="prefetch" href="/assets/js/14.94f7f4f5.js"><link rel="prefetch" href="/assets/js/15.770ca5b8.js"><link rel="prefetch" href="/assets/js/16.d5dadbdc.js"><link rel="prefetch" href="/assets/js/17.162173da.js"><link rel="prefetch" href="/assets/js/18.3a8563b9.js"><link rel="prefetch" href="/assets/js/19.d112f4b4.js"><link rel="prefetch" href="/assets/js/20.181d8923.js"><link rel="prefetch" href="/assets/js/21.3290ae90.js"><link rel="prefetch" href="/assets/js/22.0219cf3e.js"><link rel="prefetch" href="/assets/js/23.d9180754.js"><link rel="prefetch" href="/assets/js/24.563f0196.js"><link rel="prefetch" href="/assets/js/25.203f272a.js"><link rel="prefetch" href="/assets/js/26.6e7478a4.js"><link rel="prefetch" href="/assets/js/27.039a27db.js"><link rel="prefetch" href="/assets/js/28.102494c1.js"><link rel="prefetch" href="/assets/js/29.3c15c7ad.js"><link rel="prefetch" href="/assets/js/30.c4206730.js"><link rel="prefetch" href="/assets/js/31.49504d8d.js"><link rel="prefetch" href="/assets/js/32.9620ad00.js"><link rel="prefetch" href="/assets/js/33.2d1bda16.js"><link rel="prefetch" href="/assets/js/34.b50e74ff.js"><link rel="prefetch" href="/assets/js/35.81cd9186.js"><link rel="prefetch" href="/assets/js/36.8a0c6ca1.js"><link rel="prefetch" href="/assets/js/38.9d68406f.js"><link rel="prefetch" href="/assets/js/39.3d5093b3.js"><link rel="prefetch" href="/assets/js/40.d6dfbb3b.js"><link rel="prefetch" href="/assets/js/41.c9495e95.js"><link rel="prefetch" href="/assets/js/42.1410210a.js"><link rel="prefetch" href="/assets/js/43.c30003f5.js"><link rel="prefetch" href="/assets/js/44.5bd4374c.js"><link rel="prefetch" href="/assets/js/45.e2e67ee1.js"><link rel="prefetch" href="/assets/js/46.a4234c3a.js"><link rel="prefetch" href="/assets/js/47.038066e2.js"><link rel="prefetch" href="/assets/js/48.120c507c.js"><link rel="prefetch" href="/assets/js/49.5d030f44.js"><link rel="prefetch" href="/assets/js/5.f70a1b23.js"><link rel="prefetch" href="/assets/js/50.ef639f56.js"><link rel="prefetch" href="/assets/js/51.94b7aeee.js"><link rel="prefetch" href="/assets/js/52.9772d7c7.js"><link rel="prefetch" href="/assets/js/53.9c8ed1b9.js"><link rel="prefetch" href="/assets/js/54.a6a72ae9.js"><link rel="prefetch" href="/assets/js/55.850ac89f.js"><link rel="prefetch" href="/assets/js/56.1634fcfc.js"><link rel="prefetch" href="/assets/js/57.b2131de3.js"><link rel="prefetch" href="/assets/js/58.82c9e5a3.js"><link rel="prefetch" href="/assets/js/59.42924fca.js"><link rel="prefetch" href="/assets/js/6.6f6a82ee.js"><link rel="prefetch" href="/assets/js/60.e8933241.js"><link rel="prefetch" href="/assets/js/61.0257e97f.js"><link rel="prefetch" href="/assets/js/62.1044d302.js"><link rel="prefetch" href="/assets/js/63.36aebcaf.js"><link rel="prefetch" href="/assets/js/64.4b625f42.js"><link rel="prefetch" href="/assets/js/65.1e6af9b4.js"><link rel="prefetch" href="/assets/js/66.e5764ec3.js"><link rel="prefetch" href="/assets/js/67.915f7597.js"><link rel="prefetch" href="/assets/js/68.6d0b7ac3.js"><link rel="prefetch" href="/assets/js/69.04f13c44.js"><link rel="prefetch" href="/assets/js/7.bccad00b.js"><link rel="prefetch" href="/assets/js/70.a15b064b.js"><link rel="prefetch" href="/assets/js/71.d763907b.js"><link rel="prefetch" href="/assets/js/72.3447a966.js"><link rel="prefetch" href="/assets/js/73.bb987d7d.js"><link rel="prefetch" href="/assets/js/74.1003a439.js"><link rel="prefetch" href="/assets/js/75.5cc25853.js"><link rel="prefetch" href="/assets/js/76.38e05e4c.js"><link rel="prefetch" href="/assets/js/77.7d00bfb4.js"><link rel="prefetch" href="/assets/js/78.65557b76.js"><link rel="prefetch" href="/assets/js/79.814b3c5e.js"><link rel="prefetch" href="/assets/js/8.33c885ff.js"><link rel="prefetch" href="/assets/js/80.043331d8.js"><link rel="prefetch" href="/assets/js/81.7056a6a8.js"><link rel="prefetch" href="/assets/js/82.47c81510.js"><link rel="prefetch" href="/assets/js/83.67a80999.js"><link rel="prefetch" href="/assets/js/84.94e38ca1.js"><link rel="prefetch" href="/assets/js/85.80972f23.js"><link rel="prefetch" href="/assets/js/86.74374c9d.js"><link rel="prefetch" href="/assets/js/87.d061eb39.js"><link rel="prefetch" href="/assets/js/88.9e738e20.js"><link rel="prefetch" href="/assets/js/89.454117eb.js"><link rel="prefetch" href="/assets/js/9.886cd9a7.js"><link rel="prefetch" href="/assets/js/90.9f2c692b.js"><link rel="prefetch" href="/assets/js/91.b910c503.js"><link rel="prefetch" href="/assets/js/92.db022646.js"><link rel="prefetch" href="/assets/js/93.6eb3a630.js"><link rel="prefetch" href="/assets/js/94.b07278d0.js"><link rel="prefetch" href="/assets/js/95.bdbffc0e.js"><link rel="prefetch" href="/assets/js/96.35b42e21.js"><link rel="prefetch" href="/assets/js/97.041c2fc7.js"><link rel="prefetch" href="/assets/js/98.b8a0894b.js"><link rel="prefetch" href="/assets/js/99.5a0bbaf5.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.3795641f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aad39029.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/KMD_Horiz_White.svg" alt="Komodo Documentation" class="logo"></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/basic-docs/start-here/about-komodo-platform/about-komodo-platform.html" class="nav-link">
  Start Here
</a></div><div class="nav-item"><a href="https://komodoplatform.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  KomodoPlatform.com
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/komodoplatform/developer-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/basic-docs/start-here/about-komodo-platform/about-komodo-platform.html" class="nav-link">
  Start Here
</a></div><div class="nav-item"><a href="https://komodoplatform.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  KomodoPlatform.com
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/komodoplatform/developer-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Start Here</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Smart Chain Essentials</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Antara Framework</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/basic-docs/antara/introduction-to-antara.html" class="sidebar-link">Introduction to Antara Documentation</a></li><li><a href="/basic-docs/antara/antara-setup/antara-customizations.html" class="sidebar-link">Antara Customizations</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Antara Tutorials</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/basic-docs/antara/antara-tutorials/introduction-to-antara-tutorials.html" class="sidebar-link">Introduction to Antara Tutorials</a></li><li><a href="/basic-docs/antara/antara-tutorials/understanding-antara-addresses.html" class="sidebar-link">Understanding Antara Addresses</a></li><li><a href="/basic-docs/antara/antara-tutorials/overview-of-antara-modules-part-i.html" class="sidebar-link">Overview of Antara Modules — Part I</a></li><li><a href="/basic-docs/antara/antara-tutorials/overview-of-antara-modules-part-ii.html" class="sidebar-link">Overview of Antara Modules — Part II</a></li><li><a href="/basic-docs/antara/antara-tutorials/beginner-series-part-0.html" class="sidebar-link">Beginner Series — Preparation</a></li><li><a href="/basic-docs/antara/antara-tutorials/beginner-series-part-1.html" class="sidebar-link">Beginner Series — Create a Blockchain</a></li><li><a href="/basic-docs/antara/antara-tutorials/beginner-series-part-2.html" class="sidebar-link">Beginner Series — Using a Faucet</a></li><li><a href="/basic-docs/antara/antara-tutorials/beginner-series-part-3.html" class="sidebar-link">Beginner Series — Connecting to Another Programming Environment</a></li><li><a href="/basic-docs/antara/antara-tutorials/beginner-series-part-4.html" class="sidebar-link">Beginner Series — Understanding Tokens</a></li><li><a href="/basic-docs/antara/antara-tutorials/advanced-series-0.html" class="sidebar-link">Advanced Series — Introduction</a></li><li><a href="/basic-docs/antara/antara-tutorials/advanced-series-1.html" class="sidebar-link">Advanced Series — Smart Chain Development Basics</a></li><li><a href="/basic-docs/antara/antara-tutorials/advanced-series-2.html" class="sidebar-link">Advanced Series — Antara Module Development Basics</a></li><li><a href="/basic-docs/antara/antara-tutorials/advanced-series-3.html" class="sidebar-link">Advanced Series — Preparing for Heir Development</a></li><li><a href="/basic-docs/antara/antara-tutorials/advanced-series-4.html" class="active sidebar-link">Advanced Series — Final Conceptual Discussion</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/basic-docs/antara/antara-tutorials/advanced-series-4.html#understanding-cryptoconditions" class="sidebar-link">Understanding CryptoConditions</a></li><li class="sidebar-sub-header"><a href="/basic-docs/antara/antara-tutorials/advanced-series-4.html#antara-development-checklist" class="sidebar-link">Antara Development Checklist</a></li><li class="sidebar-sub-header"><a href="/basic-docs/antara/antara-tutorials/advanced-series-4.html#antara-module-architecture" class="sidebar-link">Antara Module Architecture</a></li></ul></li><li><a href="/basic-docs/antara/antara-tutorials/advanced-series-5.html" class="sidebar-link">Advanced Series — Developing the Heir Module Prototype</a></li><li><a href="/basic-docs/antara/antara-tutorials/advanced-series-6.html" class="sidebar-link">Advanced Series — Miscellaneous</a></li><li><a href="/basic-docs/antara/antara-tutorials/dilithium-module-tutorial.html" class="sidebar-link">Module Tutorial — Dilithium</a></li><li><a href="/basic-docs/antara/antara-tutorials/gateways-module-tutorial.html" class="sidebar-link">Module Tutorial — Gateways</a></li><li><a href="/basic-docs/antara/antara-tutorials/musig-module-tutorial.html" class="sidebar-link">Module Tutorial — Musig</a></li><li><a href="/basic-docs/antara/antara-tutorials/rogue-module-tutorial.html" class="sidebar-link">Module Tutorial — Rogue</a></li><li><a href="/basic-docs/antara/antara-tutorials/pegs-module-user-tutorial.html" class="sidebar-link">Module Tutorial — Pegs | User</a></li><li><a href="/basic-docs/antara/antara-tutorials/pegs-module-creator-tutorial.html" class="sidebar-link">Module Tutorial — Pegs | Creator</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Antara Modules</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AtomicDEX</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="advanced-series-—-final-conceptual-discussion"><a href="#advanced-series-—-final-conceptual-discussion" class="header-anchor">#</a> Advanced Series — Final Conceptual Discussion</h1> <p>Up to this point in the tutorial series we have discussed the general concepts of the Antara Framework and we have discussed initial preparations to build a simplified prototype of the Heir Antara Module.</p> <p>This section of the tutorial series reviews many of the conceptual aspects of the Antara Framework while also diving more thoroughly into technical details.</p> <p>This is the final conceptual discussion necessary before we begin writing code.</p> <h2 id="understanding-cryptoconditions"><a href="#understanding-cryptoconditions" class="header-anchor">#</a> Understanding CryptoConditions</h2> <p>According to the industry-wide CryptoConditions standard, a CryptoCondition is a logical expression evaluated on electronic signatures and hashes of transaction data.</p> <p>CryptoConditions are stored in the scripts of transactions and are evaluated by a supporting CryptoCondition C library.</p> <p>In a Komodo Smart Chain, the default CC library is included during the installation procedure.</p> <h4 id="antara-extensions-to-cryptoconditions"><a href="#antara-extensions-to-cryptoconditions" class="header-anchor">#</a> Antara Extensions to CryptoConditions</h4> <p>In addition to the industry-standard CryptoCondition (CC) library, Komodo's implementation of CC integrates the ability to add arbitrary code into a Smart Chain's consensus mechanism. This allows developers to create essentially an unlimited number of application-specific transaction-validation rules.</p> <p>For example, in the Heir Module, if the heir attempts to claim funds, the validation code checks whether the owner of the fund has shown recent activity, according to a specified amount of time. The owner can show activity by either adding to or spending from the fund. If the owner has not shown signs of activity, the validation code allows the heir to claim the funds.</p> <p>Through CryptoConditions and Antara's extensions, the consensus mechanism can rule over the outcome of the cryptocondition logic and arbitrary validation code across the Smart Chain's decentralized network of nodes.</p> <h4 id="makeup-of-a-cryptocondition"><a href="#makeup-of-a-cryptocondition" class="header-anchor">#</a> Makeup of a CryptoCondition</h4> <p>A CryptoCondition consists of two parts:</p> <ul><li><b>Part I: A condition that must be met</b> <ul><li>This is stored in the transaction output's <code>scriptPubKey</code></li></ul></li> <li><b>Part II: A fulfillment</b> <ul><li>This is stored in the <code>scriptSig</code> field of the input of the transaction that spends the above output</li></ul></li></ul> <h5 id="part-i-logical-condition"><a href="#part-i-logical-condition" class="header-anchor">#</a> Part I: Logical Condition</h5> <p>The <b>condition</b> contains data that checks the CryptoCondition in &quot;fingerprinted&quot; form.</p> <p>The term <a href="https://en.wikipedia.org/wiki/Fingerprint_(computing)" target="_blank" rel="noopener noreferrer">&quot;fingerprinted&quot;<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a common term in the technology industry. To &quot;fingerprint&quot; data means to convert an arbitrary set of data to a fixed-length byte array. In this manner, a fingerprint uniquely identifies the source data. (A fingerprint is similar in nature to a hash.)</p> <p>To fingerprint data in the CryptoConditions environment, the CC library acquires the target data, combines it with other data that the developer does not need to manage, and then creates the fingerprint.</p> <p>Fingerprints are useful in Antara Module development. For example, a logical condition can be a requirement that only a specific fingerprinted <code>pubkey</code> be allowed to spend a transaction output.</p> <h5 id="part-ii-logical-fulfillment"><a href="#part-ii-logical-fulfillment" class="header-anchor">#</a> Part II: Logical Fulfillment</h5> <p>The <b>fulfillment</b> contains instructions and data about how the consensus mechanism should evaluate the CryptoCondition. For example, the fulfillment could include an instruction to check a spending-transaction's electronic signature as well as the the <code>pubkey</code> associated with this signature.</p> <p>To spend a CC output of a transaction, a node on the network sends a spending transaction that contains a CC input that fulfills the CC output's condition. The consensus mechanism of the Smart Chain checks that the fulfillment is correct. For this it uses the C CryptoCondition library to evaluate the fulfillment of the spending transaction. The result of this evaluation is checked against the condition stored in the previous transaction output.</p> <p>For our example above of an electronic signature, the consensus mechanism runs the logical conditions and fulfillments of the CryptoCondition to verify the electronic signature with the provided pubkey. Then the validation logic calculates the fingerprint of the pubkey and checks it against the condition.</p> <p>In adding CryptoConditions to the Antara framework, Komodo extended the original CC protocol by adding an additional aspect beyond the inputs and outputs. This additional part is called the <b>EVAL</b> CryptoCondition, or eval code.</p> <p>Each Antara Module has its own unique eval code. The eval code is a number between 0 and 255, and it identifies the specific Antara Module that is associated with a CC transaction. When the consensus validation logic encounters the Antara Module's eval code in a transaction input, the validation logic calls the module's validation function.</p> <p>The process of validation of an Antara Module's transaction is depicted on the diagram below:</p> <div style="clear:both;margin-top:1rem;margin-bottom:1rem;float:right;display:block;"><img src="/cc-verify-work-v2.3.png" style="border:1rem solid white;margin:1rem 0rem 1rem 0rem;"></div> <h4 id="the-simplest-form-of-a-cryptocondition"><a href="#the-simplest-form-of-a-cryptocondition" class="header-anchor">#</a> The Simplest form of a CryptoCondition</h4> <p>The simplest CryptoCondition evaluates an electronic signature of a spending-transaction's <code>scriptsig</code>. Assuming the evaluation is successful, the spending-transaction is then able to spend funds from the output of another transaction.</p> <p>At first glance, you may be confused about why a CryptoCondition is useful in this event, as a normal blockchain protocol can already accomplish this task.</p> <p>The answer is that there is an important difference in the CryptoCondition implementation. When a CryptoCondition transaction output is spent, the Antara Module's code can enforce additional validation logic. This is accomplished via the eval code that is stored as a part of the CryptoCondition's inputs and outputs. We will describe this further in the Heir Module development section.</p> <p>The ability to enforce additional logic is the key difference that illuminates the power of Antara. For example, additional arbitrary validation code can include logic that allows a user to spend the output only at the appropriate time. The transaction output can be spent only via a spending transaction that has the matching fulfillment, and both the CryptoCondition and the Antara Module validation code evaluate to <code>true</code>.</p> <p>Even the basic CryptoCondition features offer more complex logical expressions than a normal Bitcoin Script. For example, with CC a spending transaction could be required to have signatures from at least <code>M</code> of <code>N</code> acceptable <code>pubkeys</code>.</p> <p>As logical conditions and subconditions can be added to a CryptoCondition as desired, the developer can utilize both the CryptoConditions features and customized module's validation code to build complex logic that governs the movement of Smart Chain assets. In this sense, Antara is an advanced evolution of the basic Bitcoin Script security features, such as pubkey or pubkey hash scripts. We will examine validation code in greater detail later in this tutorial.</p> <p>In this section, we became acquainted with the concept of logical conditions that are associated with transaction outputs, and logical fulfillments associated with spending-transactions. These two elements make up the rudimentary aspect of a CryptoCondition.</p> <p>There are yet other elements of an Antara-based CryptoCondition. One element is called the <code>EVAL</code> code, and it is stored in the CryptoCondition's inputs and outputs. We will touch on this topic soon.</p> <h4 id="antara-module-as-data-and-business-logic-layer-of-business-application"><a href="#antara-module-as-data-and-business-logic-layer-of-business-application" class="header-anchor">#</a> Antara Module as Data and Business Logic Layer of Business Application</h4> <p>An Antara Module can be described as a combination of a data layer and a business-logic layer in an application. The data layer is the collection of transactions related to the Antara Module, and the business-logic layer is the module's arbitrary code.</p> <p>These two layers tie in with other layers in an Antara-based software application. For example, the software external to the blockchain could include a presentation layer, consisting of a Graphical User Interface (GUI) and other visual elements. External applications interact with an Antara Module via its RPC calls.</p> <p>Also, there can often be an additional oracle layer, wherein oracle software connects nodes to external data sources across the Internet. This can be the case in Antara-based software applications that make use of the <a href="/basic-docs/antara/antara-api/oracles.html#introduction"><b>Oracles</b></a> Antara Module.</p> <h4 id="a-global-cc-address-in-the-antara-framework"><a href="#a-global-cc-address-in-the-antara-framework" class="header-anchor">#</a> A Global CC Address in the Antara Framework</h4> <p>Recall that each Antara Module has an associated global CC address. The private key to this global CC address is publicly available. The address can be used for such tasks as sharing funds between users of this module, and anyone can attempt to spend funds from this address.</p> <p>The following is an example of a global CC address created and assigned for the Heir module.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>HeirCCaddr <span class="token operator">=</span> <span class="token string">&quot;RDVHcSekmXgeYBqRupNTmqo3Rn8QRXNduy&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>HeirNormaladdr <span class="token operator">=</span> <span class="token string">&quot;RTPwUjKYECcGn6Y4KYChLhgaht1RSU4jwf&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> HeirCChexstr<span class="token punctuation">[</span><span class="token number">67</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;03c91bef3d7cc59c3a89286833a3446b29e52a5e773f738a1ad2b09785e5f4179e&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">uint8_t</span> HeirCCpriv<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0x9d</span><span class="token punctuation">,</span> <span class="token number">0xa1</span><span class="token punctuation">,</span> <span class="token number">0xf8</span><span class="token punctuation">,</span> <span class="token number">0xf7</span><span class="token punctuation">,</span> <span class="token number">0xba</span><span class="token punctuation">,</span> <span class="token number">0x0a</span><span class="token punctuation">,</span> <span class="token number">0x91</span><span class="token punctuation">,</span> <span class="token number">0x36</span><span class="token punctuation">,</span> <span class="token number">0x89</span><span class="token punctuation">,</span> <span class="token number">0x9a</span><span class="token punctuation">,</span> <span class="token number">0x86</span><span class="token punctuation">,</span> <span class="token number">0x30</span><span class="token punctuation">,</span> <span class="token number">0x63</span><span class="token punctuation">,</span> <span class="token number">0x20</span><span class="token punctuation">,</span> <span class="token number">0xd7</span><span class="token punctuation">,</span> <span class="token number">0xdf</span><span class="token punctuation">,</span> <span class="token number">0xaa</span><span class="token punctuation">,</span> <span class="token number">0x35</span><span class="token punctuation">,</span> <span class="token number">0xe3</span><span class="token punctuation">,</span> <span class="token number">0x99</span><span class="token punctuation">,</span> <span class="token number">0x32</span><span class="token punctuation">,</span> <span class="token number">0x2b</span><span class="token punctuation">,</span> <span class="token number">0x63</span><span class="token punctuation">,</span> <span class="token number">0xc0</span><span class="token punctuation">,</span> <span class="token number">0x66</span><span class="token punctuation">,</span> <span class="token number">0x9c</span><span class="token punctuation">,</span> <span class="token number">0x93</span><span class="token punctuation">,</span> <span class="token number">0xc4</span><span class="token punctuation">,</span> <span class="token number">0x5e</span><span class="token punctuation">,</span> <span class="token number">0x9d</span><span class="token punctuation">,</span> <span class="token number">0xb9</span><span class="token punctuation">,</span> <span class="token number">0xce</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><table><thead><tr><th>Function</th> <th>Description</th></tr></thead> <tbody><tr><td>HeirCCaddr</td> <td>the global CC address itself</td></tr> <tr><td>HeirCChexstr</td> <td>the pubkey</td></tr> <tr><td>HeirCCpriv</td> <td>the privkey for the global CC address</td></tr> <tr><td>HeirNormaladdr</td> <td>The normal address for the same pubkey and privkey. Spending from this address does not validation by the Antara Module</td></tr></tbody></table> <p>In the Antara codebase, the global CC address is sometimes called the &quot;unspendable&quot; address. This is likely a reference to the fact that for any user to spend funds from this address, the spending transaction must pass the module's validation code.</p> <p>For example, the global CC address could store funds shared between several users. As a global CC address's privkey is publicly available, anyone might try to spend these funds. This is where the Antara validation code will exercise control over whom is allowed to spend funds, and by which rules. The RPC aspect of the Antara Module must prevent the creation of inappropriate transactions as well.</p> <p>A transaction can also send a nominal fee to the global CC address with the intention of turning this transaction's output into a search key (called a marker). To ensure these markers remain publicly visible forever, the module's validation code can disable spending for these markers. With this combination, the developer can use the <code>SetCCunspents</code> SDK function to enumerate all transactions in the global CC address, and thus discover the module's transaction history.</p> <h2 id="antara-development-checklist"><a href="#antara-development-checklist" class="header-anchor">#</a> Antara Development Checklist</h2> <p>Development requirements for each Antara Module:</p> <ul><li>Allocate a new <code>EVAL</code> code for your module</li> <li>Assign a global address for the module</li> <li>Define the module's transactions
<ul><li>This includes the structure of their inputs, outputs, and opreturn format</li></ul></li> <li>Implement the common RPC functions that nearly all modules feature
<ul><li>These are typically functions for retrieving a list of all of the module's initial transactions, and for retrieving user addresses and the global CC address</li></ul></li> <li>Implement the module's specific RPC functions
<ul><li>These are used to create the module-related transactions and to return relevant information about the module's data and state</li></ul></li> <li>Implement the module's validation code</li></ul> <h2 id="antara-module-architecture"><a href="#antara-module-architecture" class="header-anchor">#</a> Antara Module Architecture</h2> <p>From an architectural standpoint, an Antara Module is simply a C/C++ source file.</p> <div style="clear:both;margin-top:1rem;margin-bottom:1rem;float:right;display:block;"><img src="/CC-Antara-arch-v2.3.png" style="border:0.5rem solid white;margin:1rem 0rem 1rem 0rem;"></div> <p>There are two parts to the module's source file: the implementation of RPC's and the validation code. You also need to inform the basic komodod source code of your new Antara Module through the following steps.</p> <ul><li>Allocate a new eval code for your Antara Module in <code>src/cc/eval.h</code></li> <li>add your module's global addresses and the validation code entry function into the registry of Antara Modules in <code>src/cc/CCcustom.cpp</code></li></ul> <h4 id="rpc-implementations"><a href="#rpc-implementations" class="header-anchor">#</a> RPC Implementations</h4> <p>The first part of the Antara's module source file consists of the implementation of all Remote Procedure Calls (RPC's) for this module. These typically either perform transactions or query information about state and data.</p> <p>The developer must also implement high-level functions for any desired RPC commands that are called by the RPC engine and are responsible for converting the RPC data to native C++ data types.</p> <p>These functions should be added into an existing source in the <code>/src/rpc</code> directory. Alternatively, the developer might create his own RPC source file.</p> <p>A reference to the RPC-command functions should be added to the global RPC command table in the <code>/src/rpc/server.cpp</code> source file.</p> <p>With this properly completed, the Smart Chain daemon's compiler will automatically make each RPC available at the command line through the <code>komodo-cli</code> software and via the <code>curl</code> utility.</p> <p>Essentially all modules have at least these two RPC's.</p> <ul><li>XXXXlist
<ul><li>This lists all initial transactions relevant to the module</li></ul></li> <li>XXXXinfo
<ul><li>This RPC typically also requires an additional input -- a transaction ID for which information is desired</li> <li>When called, the method then returns information about this transaction ID</li></ul></li></ul> <p>Include other RPC implementations as desired.</p> <h4 id="antara-module-validation-code"><a href="#antara-module-validation-code" class="header-anchor">#</a> Antara Module Validation Code</h4> <p>The main purpose of Antara Module validation code is two-fold. First, it ensures that the structure of the sequence of Antara Module related transactions and their data is accurate. Second, the validation code prevents inappropriate Antara-related transactions from entering the chain. In other words, module validation code should protect against malicious transactions, and this is the code's most important task.</p> <p>Antara Module Validation code is triggered anytime a node attempts to add a CC spending-transaction to the chain.</p> <p>A module's validation code is activated only when a transaction has at least one CC input that bears the module's <code>EVAL</code> code inside the <b>scriptSig</b> in the transaction.</p> <p>A module's initial transaction may not have a CC input. When this happens, the validation code is not triggered. Therefore, the transaction may be handled by the normal blockchain protocol.</p> <p>As an aside, when the developer needs to write code that validates a spending transaction that spends a utxo that has no CC inputs, the code must first validate the utxo as well. If the result of the validation of the utxo is <code>false</code>, then the code can also reject the spending transaction. We will delve into this topic in thorough detail further in the tutorial.</p> <h4 id="the-eval-code"><a href="#the-eval-code" class="header-anchor">#</a> The EVAL Code</h4> <p>A unique 8-bit <code>EVAL</code> code is attached to each Antara Module. The <code>EVAL</code> code is used by the core Smart Chain daemon's transaction-validation code to route any relevant transactions to the appropriate module's validation code.</p> <p>The <code>EVAL</code> code itself is actually a simple CryptoCondition. The CryptoCondition tests for the byte value and, if the value is <code>true</code>, routes the result according to the core Smart Chain daemon's code.</p> <h3 id="antara-module-transaction-structure"><a href="#antara-module-transaction-structure" class="header-anchor">#</a> Antara Module Transaction Structure</h3> <div style="clear:both;margin-top:1rem;margin-bottom:1rem;float:right;display:block;"><img src="/cc-tx-structure-for-guide-v3.2.png" style="border:1rem solid white;"></div> <p>A CryptoCondition (CC) input is called a &quot;vin&quot; and a CryptoCondition output is called a &quot;vout&quot;.</p> <p>A CC transaction has one or more vins and one or more vouts.</p> <p>When creating a CC transaction, the transaction's vins can consume the vouts of previous transactions that were either related to CC, or not related.</p> <p>When they are not related to CC, the vin of the current transaction does not need to include a CC fulfillment.</p> <p>However, if the current transaction's vins are consuming vouts from a CC-related transaction, then the current transaction's vins must contain logical fulfillments that meet the requirements of the previous transaction's CC vouts. Also, the current transaction's CC vins contain the transaction id (txid) of the previous transaction.</p> <p>A CC transaction typically also has an opreturn vout that contains module data.</p> <h4 id="antara-module-sdk"><a href="#antara-module-sdk" class="header-anchor">#</a> Antara Module SDK</h4> <p>Komodo is building an SDK for Antara Module development. The SDK is still in the early stages. Some of the SDK functions are already available, and can be found in the following source files:</p> <ul><li>CCtx.cpp</li> <li>CCutils.cpp</li> <li>cc.cpp</li> <li>eval.cpp</li></ul> <p>We will return to the SDK functions when we discuss the Heir module development process.</p> <hr> <p><a href="/basic-docs/antara/antara-tutorials/advanced-series-5.html"><b>Link to Next Tutorial in Advanced Series</b></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/komodoplatform/developer-docs/edit/master/docs/basic-docs/antara/antara-tutorials/advanced-series-4.md" target="_blank" rel="noopener noreferrer">Suggest an improvement for this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/basic-docs/antara/antara-tutorials/advanced-series-3.html" class="prev">
        Advanced Series — Preparing for Heir Development
      </a></span> <span class="next"><a href="/basic-docs/antara/antara-tutorials/advanced-series-5.html">
        Advanced Series — Developing the Heir Module Prototype
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2fb484c4.js" defer></script><script src="/assets/js/3.49432c4f.js" defer></script><script src="/assets/js/4.5c101ead.js" defer></script><script src="/assets/js/37.c342624a.js" defer></script>
  </body>
</html>
